(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{17601:function(e,t,n){Promise.resolve().then(n.bind(n,93879))},93879:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var r=n(27573),s=n(34077),o=n(7653),a=n(40350);class i{setupMessageListener(){window.addEventListener("message",this.boundHandleMessage,!1)}handleMessage(e){if(!1===this.allowedOrigins.includes(e.origin)||e.source!==this.parentWindow)return;let t=a.qV.safeParse(e.data);if(!t.success){console.warn("Received message does not conform to basic request shape, ignoring");return}let n=t.data;if("response"===n.channel){this.handleResponse(n);return}if(!s.Wy.safeParse(n.method).success){this.sendErrorResponse(n.requestId,400,"Unknown method");return}let r=s.N7.safeParse(n);if(!r.success){this.sendErrorResponse(n.requestId,400,"Invalid payload content");return}let o=r.data;this.onOutsideRequest(o).then(e=>{let t=a.Tk.parse({channel:"response",status:200,requestId:o.requestId,payload:null!=e?e:a.D7});this.sendMessage(t)}).catch(e=>{console.error("Error processing action for method ".concat(o.method,":"),e),this.sendErrorResponse(o.requestId,500,"Internal error while processing action")})}sendErrorResponse(e,t,n){let r=a.Kj.parse({channel:"response",status:t,requestId:e,payload:(0,a.v8)(n)});this.sendMessage(r)}sendMessage(e){this.allowedOrigins.forEach(t=>{this.parentWindow.postMessage(e,t)})}cleanup(){window.removeEventListener("message",this.boundHandleMessage),this.inFlightRequests.clear()}handleResponse(e){let t=this.inFlightRequests.get(e.requestId);if(void 0!==t){t(e);return}}async sendRequest(e,t){return new Promise((n,r)=>{let o=Date.now().toString()+Math.random().toString(),i={channel:"request",method:e,requestId:o,payload:t},l=e=>{let t=a.Tk.safeParse(e);if(!t.success){r(Error("Invalid response format"));return}let o=t.data;if(o.status>=400){let e=a.Kj.safeParse(o);e.success?r(Error(e.data.payload.error)):r(Error("Error response (".concat(o.status,")")));return}let i=s.FO.safeParse(o);i.success?n(i.data.payload):r(Error("Invalid response payload for the method"))};this.inFlightRequests.set(o,l),this.sendMessage(i)})}constructor({parentWindow:e,allowedOrigins:t,onOutsideRequest:n}){this.inFlightRequests=new Map,this.parentWindow=e,this.allowedOrigins=t,this.onOutsideRequest=n,this.boundHandleMessage=this.handleMessage.bind(this),this.setupMessageListener()}}function l(e){let{parentWindow:t,allowedOrigins:n,onOutsideRequest:r}=e,[s,a]=(0,o.useState)(null);(0,o.useEffect)(()=>{if(t){let e=new i({parentWindow:t,allowedOrigins:n,onOutsideRequest:r});return a(e),()=>{e.cleanup()}}},[t,n,r]);let l=(0,o.useCallback)(async(e,t)=>{if(s)return s.sendRequest(e,t);throw Error("Communicator not initialized")},[s]);return{sendRequest:null===s?void 0:l}}var c=n(64507),u=n(65119),d=n(57198),p=n(56432),m=n(14988),g=n(48078),h=n(34363),f=n(52063),x=n(41085);let b=e=>(0,x.vs)(e,{transforms:["jsx","typescript","imports"],production:!0}).code.substring(13),y="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js";function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;return new Promise(n=>{let r="\n      importScripts('".concat(y,"')\n\n      const dependencies = {\n        _,\n        lodash: _,\n        // Add other dependencies here\n      };\n\n      const mockRequire = (moduleName) => {\n        return dependencies[moduleName];\n      };\n\n      let pendingPromises = new Set();\n      let pendingTimers = new Set();\n\n      const originalPromise = Promise;\n      self.Promise = function (...args) {\n        const promise = new originalPromise(...args);\n        pendingPromises.add(promise);\n        promise.then(() => pendingPromises.delete(promise), () => pendingPromises.delete(promise));\n        return promise;\n      };\n\n      // Maintain static methods of Promise\n      Object.getOwnPropertyNames(originalPromise).forEach(prop => {\n        if (prop !== 'prototype' && typeof originalPromise[prop] === 'function') {\n          self.Promise[prop] = function(...args) {\n            const result = originalPromise[prop].apply(originalPromise, args);\n            if (result instanceof originalPromise) {\n              pendingPromises.add(result);\n              result.then(() => pendingPromises.delete(result), () => pendingPromises.delete(result));\n            }\n            return result;\n          };\n        }\n      });\n\n      const originalSetTimeout = self.setTimeout;\n      self.setTimeout = function (callback, delay, ...args) {\n        const timer = originalSetTimeout(() => {\n          pendingTimers.delete(timer);\n          callback(...args);\n        }, delay);\n        pendingTimers.add(timer);\n        return timer;\n      };\n\n      function waitForAsync() {\n        return new originalPromise(resolve => {\n          function check() {\n            if (pendingPromises.size === 0 && pendingTimers.size === 0) {\n              resolve();\n            } else {\n              originalSetTimeout(check, 0);\n            }\n          }\n          check();\n        });\n      }\n\n      const logs = [];\n      const originalConsole = console;\n      console = {\n        log: (...args) => {\n          logs.push(args.join(' '));\n          originalConsole.log(...args);\n        },\n        warn: (...args) => {\n          logs.push('WARN: ' + args.join(' '));\n          originalConsole.warn(...args);\n        },\n        error: (...args) => {\n          logs.push('ERROR: ' + args.join(' '));\n          originalConsole.error(...args);\n        }\n      };\n\n      self.onmessage = async function(e) {\n        const code = e.data;\n        const wrappedCode = `\n          return (async ({ require }) => {\n            ${code}\n          });\n        `;\n\n        try {\n          const fn = new Function(wrappedCode);\n          const result = await fn()({ require: mockRequire });\n          await waitForAsync();\n          self.postMessage({ status: 'success', result: JSON.stringify(result), logs });\n        } catch (error) {\n          self.postMessage({ status: 'error', error: JSON.stringify(error), logs });\n        }\n      };\n    "),o=new Worker(URL.createObjectURL(new Blob([r],{type:"application/javascript"}))),a=setTimeout(()=>{o.terminate(),n({status:"error",logs:[],error:"Execution timed out"})},t);o.onmessage=e=>{clearTimeout(a),o.terminate();let t=s.vr.safeParse(e.data);t.success?n(t.data):n({status:"error",logs:[],error:"Invalid execution result: "+t.error.message})},o.postMessage(b(e))})}let v=e=>{let{sendRequest:t,displayError:n}=e;(0,o.useEffect)(()=>{let e=void 0===t?async(e,t)=>Promise.resolve(null):async(e,r)=>{try{let o=(await t(s.to.GetFile,{"@type":"anthropic.claude.usercontent.sandbox.GetFileRequest",key:e})).value;if(null===o)return n({title:"File not available",description:'No file named "'.concat(e,'"')}),null;let a=(null==r?void 0:r.encoding)||null;if("utf8"===a||"utf-8"===a||"utf_8"===a)return new TextDecoder("utf-8").decode(o);if("binary"===a||null===a)return o;throw Error("Unsupported encoding: ".concat(a))}catch(e){return n({title:"Error loading file",description:e instanceof Error?e.message:String(e)}),null}};window.fs={readFile:e}},[t,n])},C={allowedParents:[{origin:"claude.ai",scheme:"https"},{origin:"preview.claude.ai",scheme:"https"},{origin:"claude.site",scheme:"https"},{origin:"feedback.anthropic.com",scheme:"https"}],defaultParentOrigin:"claude.ai",origin:"https://www.claudeusercontent.com"},j={allowedParents:[{origin:"claude-ai.staging.ant.dev",scheme:"https"},{origin:"preview.claude-ai.staging.ant.dev",scheme:"https"},{origin:"staging.claude.site",scheme:"https"}],defaultParentOrigin:"claude-ai.staging.ant.dev",origin:"https://staging.claudeusercontent.com"},E={allowedParents:[{origin:"localhost:4000",scheme:"http"},{origin:"localhost:4020",scheme:"http"},{origin:"localhost:3000",scheme:"http"}],defaultParentOrigin:"localhost:4000",origin:"http://localhost:4010"},S=["development","production","staging"],R="production";if(R&&!S.includes(R))throw Error("Invalid NEXT_PUBLIC_APP_ENV value, must be one of ".concat(S.join(", ")));let z={production:C,staging:j,development:E}[R||"development"];function P(){return{...z}}let{defaultParentOrigin:q}=P();function k(){try{return window.self!==window.top}catch(e){return!0}}function M(){if(window.top)try{window.top.location.href="//".concat(q);return}catch(e){}window.location.href="//".concat(q)}function N(){let{allowedParents:e}=P(),[t,n]=(0,o.useState)(""),[a,i]=(0,o.useState)(),[x,b]=(0,o.useState)(!1),y=(0,o.useRef)(null),C=(0,o.useMemo)(()=>e.map(e=>"".concat(e.scheme,"://").concat(e.origin)),[e]),j=(0,o.useCallback)(()=>{y.current&&(clearTimeout(y.current),y.current=null),b(!1)},[]),E=(0,o.useCallback)(async e=>{let{method:t,payload:r}=e;if(j(),t===s.to.SetContent){n(r.content),i(r.type);return}if(t===s.to.RunCode)try{let e=await w(r.code);return{"@type":"anthropic.claude.usercontent.sandbox.RunCodeResponse",...e}}catch(e){return{"@type":"anthropic.claude.usercontent.sandbox.RunCodeResponse",status:"error",logs:[],error:"Unexpected error executing code: "+(e instanceof Error?e.message:String(e))}}},[j]),{sendRequest:S}=l({parentWindow:window.parent,allowedOrigins:C,onOutsideRequest:E}),[R,z]=(0,o.useState)(null);v({sendRequest:S,displayError:(0,o.useCallback)(e=>{z(e)},[z])}),(0,o.useEffect)(()=>{k()||M()},[]),(0,o.useEffect)(()=>{null==S||S(s.to.ReadyForContent,{"@type":"google.protobuf.Empty"})},[S]),(0,o.useEffect)(()=>(j(),y.current=setTimeout(()=>{b(!0)},3e3),()=>{y.current&&clearTimeout(y.current)}),[t,a,j]);let q=(0,o.useCallback)(t=>{var r;if(!e.some(e=>t.origin==="".concat(e.scheme,"://").concat(e.origin))||!t.data.type)return;j();let{type:s,content:o}=t.data;i(s),n(o),null===(r=t.source)||void 0===r||r.postMessage({type:"MESSAGE_RECEIVED",requestId:t.data.requestId},{targetOrigin:t.origin})},[e,j]);return(0,o.useEffect)(()=>(window.addEventListener("message",q),window.parent&&e.forEach(e=>{window.parent.postMessage({type:"USER_CONTENT_RENDERER_READY"},"".concat(e.scheme,"://").concat(e.origin))}),()=>window.removeEventListener("message",q)),[q,e]),(0,r.jsx)(u.ErrorBoundary,{errorComponent:e=>{let{error:t}=e;return(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center bg-gray-100 p-4",children:(0,r.jsx)(d.Z,{title:"Error Running Artifact",description:"An error occurred while trying to run the generated artifact.",inset:(0,r.jsx)("span",{className:"text-destructive",children:t.message})})})},children:(0,r.jsxs)(r.Fragment,{children:[R&&(0,r.jsx)("div",{className:"flex w-full items-center justify-center bg-gray-100 p-4",children:(0,r.jsx)(d.Z,{...R})}),t&&a?(0,r.jsxs)(r.Fragment,{children:[a===c.JP.Html&&(0,r.jsx)(h.Z,{content:t}),a===c.JP.Svg&&(0,r.jsx)(f.Z,{content:t}),a===c.JP.Mermaid&&(0,r.jsx)(p.Z,{content:t}),a===c.JP.React&&(0,r.jsx)(m.Z,{content:t}),a===c.KD.Repl&&(0,r.jsx)(g.Z,{initialCode:t,sendRequest:S})]}):x?(0,r.jsx)("div",{className:"flex min-h-full w-full items-center justify-center bg-gray-100 p-4",children:(0,r.jsx)(d.Z,{title:"Loading is taking longer than expected",description:"There may be an issue with the content you're trying to load. ",subtext:"The code itself may still be valid and functional. "})}):(0,r.jsx)("div",{className:"loader"})]})},t)}!function(){k()||M()}()},98204:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(27573),s=n(7653),o=n(97443),a=n(26105),i=n(72998),l=n(4772),c=n(86142),u=n(92388);let d=()=>{let{zoomIn:e,zoomOut:t}=(0,o.M4)(),[n,d]=(0,s.useState)(!1),p=(0,s.useCallback)(()=>{let e=document,t=e.documentElement;e.fullscreenElement?e.exitFullscreen&&(e.exitFullscreen(),d(!1)):(t.requestFullscreen(),d(!0))},[]);return(0,r.jsx)("div",{className:"absolute bottom-2 right-2 z-10 flex flex-col",children:(0,r.jsxs)("div",{className:"flex flex-col gap-0.5 rounded-md border-[0.5px] border-[#636d83a0] p-0.5",children:[(0,r.jsx)(u.Button,{className:"flex !h-7 !w-7 items-center justify-center !border-0 !bg-transparent !px-0 !text-[#636D83] !shadow-none hover:!bg-[#3338421f]",variant:"outline",onClick:t=>{t.preventDefault(),e()},children:(0,r.jsx)(a.Z,{size:16})}),(0,r.jsx)("div",{className:"h-[0.5px] w-full px-1",children:(0,r.jsx)("hr",{className:"border-b-[0.5px] border-t-0 border-[#636D83a0]"})}),(0,r.jsx)(u.Button,{className:"flex !h-7 !w-7 items-center justify-center !border-0 !bg-transparent !px-0 !text-[#636D83] !shadow-none hover:!bg-[#3338421f]",variant:"outline",onClick:e=>{e.preventDefault(),t()},children:(0,r.jsx)(i.Z,{size:16})}),(0,r.jsx)("div",{className:"h-[0.5px] w-full px-1",children:(0,r.jsx)("hr",{className:"border-b-[0.5px] border-t-0 border-[#636D83a0]"})}),(0,r.jsx)(u.Button,{className:"flex !h-7 !w-7 items-center justify-center !border-0 !bg-transparent !px-0 !text-[#636D83] !shadow-none hover:!bg-[#3338421f]",variant:"outline",onClick:e=>{e.preventDefault(),p()},children:n?(0,r.jsx)(l.Z,{size:16}):(0,r.jsx)(c.Z,{size:16})})]})})};var p=e=>{let{children:t,style:n}=e,[a,i]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=()=>{i(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}},[]),(0,r.jsx)("div",{className:"".concat(a?"fixed inset-0 z-50":"h-screen w-full"," [&>.react-transform-wrapper>.react-transform-component]:flex [&>.react-transform-wrapper>.react-transform-component]:h-full [&>.react-transform-wrapper>.react-transform-component]:w-full [&>.react-transform-wrapper>.react-transform-component]:cursor-move [&>.react-transform-wrapper>.react-transform-component]:items-center [&>.react-transform-wrapper>.react-transform-component]:justify-center [&>.react-transform-wrapper>.react-transform-component]:p-4 [&>.react-transform-wrapper]:h-full [&>.react-transform-wrapper]:w-full"),style:n,children:(0,r.jsxs)(o.d$,{doubleClick:{disabled:!1},children:[(0,r.jsx)(d,{}),(0,r.jsx)(o.Uv,{children:t})]})})}},56432:function(e,t,n){"use strict";var r=n(27573),s=n(7653),o=n(98204);let a={darkMode:!0,primaryColor:"#333842",secondaryColor:"#21252B",tertiaryColor:"#abb2bf",primaryTextColor:"#ABB2BF",secondaryTextColor:"#5c6370",tertiaryTextColor:"#4b5263",primaryBorderColor:"#636D83",secondaryBorderColor:"#5c6370",tertiaryBorderColor:"#4b5263",edgeLabelBackground:"#282C34",lineColor:"#636D83",textColor:"#abb2bf",pie1:"#56b6c2",pie2:"#61afef",pie3:"#c678dd",pie4:"#98c379",pie5:"#e06c75",pie6:"#d19a66",pieStrokeColor:"#2C313A",pieOuterStrokeColor:"#2C313A",fillType0:"#0d7377",fillType1:"#1f4e79",fillType2:"#8e44ad",fillType3:"#317732",fillType4:"#a31d48",fillType5:"#8f5c38",fillType6:"#a37d18",fillType7:"#4c5056"},i=()=>{let[e,t]=(0,s.useState)(null);return(0,s.useEffect)(()=>{(async()=>{try{let e=await Promise.all([n.e(4843),n.e(780),n.e(6756)]).then(n.bind(n,29555));t(e.default)}catch(e){console.error("Failed to load Mermaid: ".concat(e))}})()},[]),e},l=e=>{let{content:t}=e,n=i();(0,s.useEffect)(()=>{null==n||n.initialize({securityLevel:"strict",theme:"base",themeCSS:".label foreignObject { overflow: visible; }",themeVariables:{fontFamily:"monospace",fontSize:"14px",...a}})},[n]),(0,s.useEffect)(()=>{n&&setTimeout(()=>{let e=document.getElementById("mermaid");null==e||e.removeAttribute("data-processed"),null==n||n.contentLoaded()},1)},[t,n]);let l=async()=>{if(document.fullscreenElement){var e,t;await (null===(e=(t=document).exitFullscreen)||void 0===e?void 0:e.call(t))}else await document.documentElement.requestFullscreen()};return n?(0,r.jsxs)(o.Z,{style:{backgroundColor:"rgb(40, 44, 52)"},children:[(0,r.jsx)("div",{id:"mermaid",className:"mermaid flex max-h-full max-w-full grow items-center justify-center self-stretch bg-[#282C34] [&>svg]:max-h-full [&>svg]:max-w-full",children:t}),(0,r.jsx)("button",{onClick:l,className:"absolute bottom-2 right-2 z-10 rounded-md bg-[#3338421f] px-2 py-1 text-[#636D83] hover:bg-[#3338423f]"})]}):(0,r.jsx)(r.Fragment,{children:"Loading..."})};t.Z=l},48078:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(27573),_ant_chat_components_Artifacts_api_actions__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(34077),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7653);let ReplRenderer=param=>{let{initialCode="",sendRequest}=param,fetchData=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(async e=>{if(sendRequest)return(await sendRequest(_ant_chat_components_Artifacts_api_actions__WEBPACK_IMPORTED_MODULE_1__.to.GetFile,{key:e,"@type":"anthropic.claude.usercontent.sandbox.GetFileRequest"})).value},[sendRequest]),onFinish=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(e=>{null==sendRequest||sendRequest(_ant_chat_components_Artifacts_api_actions__WEBPACK_IMPORTED_MODULE_1__.to.SendConversationMessage,{messageType:"text",message:e,"@type":"anthropic.claude.usercontent.sandbox.SendConversationMessageRequest"})},[sendRequest]),onError=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(e=>{null==sendRequest||sendRequest(_ant_chat_components_Artifacts_api_actions__WEBPACK_IMPORTED_MODULE_1__.to.SendConversationMessage,{messageType:"error",message:e,"@type":"anthropic.claude.usercontent.sandbox.SendConversationMessageRequest"})},[sendRequest]);return(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{try{var _JSON_stringify;let res=eval(initialCode);onFinish(null!==(_JSON_stringify=JSON.stringify(res))&&void 0!==_JSON_stringify?_JSON_stringify:"")}catch(err){onError(err instanceof Error?err.message:String(err))}},[initialCode,onError,onFinish]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{})};ReplRenderer.displayName="ReplRenderer",__webpack_exports__.Z=ReplRenderer},34363:function(e,t,n){"use strict";var r=n(27573),s=n(25369),o=n(12452),a=n(75427),i=n(7653),l=n(35661);let c=e=>{let{content:t}=e,[n,c]=(0,i.useState)([]);(0,i.useEffect)(()=>{let e=e=>{e.data&&"console"===e.data.type&&c(t=>[...t,e.data.message])};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[]);let u="\n    <script>\n      (function() {\n        const originalConsole = window.console;\n        window.console = {\n          log: (...args) => {\n            originalConsole.log(...args);\n            window.parent.postMessage({ type: 'console', message: args.join(' ') }, '*');\n          },\n          error: (...args) => {\n            originalConsole.error(...args);\n            window.parent.postMessage({ type: 'console', message: 'Error: ' + args.join(' ') }, '*');\n          },\n          warn: (...args) => {\n            originalConsole.warn(...args);\n            window.parent.postMessage({ type: 'console', message: 'Warning: ' + args.join(' ') }, '*');\n          }\n        };\n\n        window.addEventListener('error', (event) => {\n          window.parent.postMessage({ type: 'console', message: 'Uncaught Error: ' + event.message }, '*');\n        });\n      })();\n    </script>\n  ",d=t.replace("<head>","<head>".concat(u));return(0,r.jsxs)(l.ResizablePanelGroup,{direction:"vertical",className:"h-screen",children:[(0,r.jsx)(l.ResizablePanel,{defaultSize:n.length>0?80:100,children:(0,r.jsx)("iframe",{className:"h-full w-full",sandbox:"allow-scripts",srcDoc:d})}),n.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.ResizableHandle,{withHandle:!0}),(0,r.jsx)(l.ResizablePanel,{defaultSize:20,children:(0,r.jsxs)("div",{className:"h-full overflow-auto p-4",style:{backgroundColor:"hsl(60 1.8% 22%)",backgroundImage:"linear-gradient(hsl(60 3.3% 17.8%), hsl(45 4.9% 16.1%))"},children:[(0,r.jsxs)("div",{className:"mb-2 inline-flex items-center gap-2 rounded-lg border px-2 py-1",style:{borderColor:"hsl(50 5.9% 40%)",color:"hsl(47 8.4% 79%)"},children:[(0,r.jsx)(s.Z,{size:12}),(0,r.jsx)("h2",{className:"gap-2 font-sans text-xs",children:"Console Messages"})]}),n.map((e,t)=>{let n=null,s={},i={color:"hsl(50 23.1% 94.9%)"};return e.startsWith("Error:")||e.startsWith("Uncaught Error:")?(n=(0,r.jsx)(o.Z,{size:12,className:"mt-1 shrink-0 text-red-500"}),s={backgroundColor:"rgba(255, 0, 0, 0.1)"},i.color="hsl(5 69.4% 72.9%)"):e.startsWith("Warning:")&&(n=(0,r.jsx)(a.Z,{size:12,className:"mt-1 shrink-0 text-yellow-500"}),s={backgroundColor:"rgba(255, 255, 0, 0.1)"},i.color="hsl(18 50.4% 47.5%)"),(0,r.jsxs)("div",{className:"mb-0.5 flex items-start gap-2 rounded-lg px-2 py-1",style:s,children:[(0,r.jsx)(r.Fragment,{children:n}),(0,r.jsx)("pre",{className:"flex-grow text-wrap font-mono text-sm",style:i,children:e})]},t)})]})})]})]})};t.Z=c},52063:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(27573),s=n(7653),o=n(83603),a=n.n(o),i=n(48788);let l=e=>{let t=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9.]+))?\)/);if(!t)return console.error("Invalid color format:",e),e;let[,n,r,s,o="1"]=t,i=parseInt(n,10),l=parseInt(r,10),c=parseInt(s,10),u=parseFloat(o),[d,p,m]=a().rgb.hsl(i,l,c),g=Math.max(0,p-5),h=Math.max(0,m-25),[f,x,b]=a().hsl.rgb([d,g,h]);return"rgba(".concat(f,", ").concat(x,", ").concat(b,", ").concat(.8*u,")")},c=e=>{let t=new XMLSerializer().serializeToString(e),n=window.btoa(t);return"data:image/svg+xml;base64,".concat(n)},u=e=>{let t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t},d=async(e,t)=>{let n=c(e);return new Promise((e,r)=>{let s=new Image;s.onload=async()=>{let n=u(s);try{let r=await t.getColorAsync(n),s=l(r.rgba),o=r.isDark?"#fff":"#000";e({backgroundColor:s,textColor:o})}catch(e){r(e)}},s.onerror=r,s.src=n})};var p=e=>{let[t,n]=(0,s.useState)(""),[r,o]=(0,s.useState)("");return(0,s.useEffect)(()=>{let t=new i.Z,r=e.current;if(!r)return;let s=r.querySelector("svg");s&&d(s,t).then(e=>{let{backgroundColor:t,textColor:r}=e;n(t),o(r)}).catch(e=>{console.error("Error getting average color:",e)})},[e]),{backgroundColor:t,textColor:r}},m=n(98204),g=e=>{let{content:t}=e,n=(0,s.useRef)(null),{backgroundColor:o,textColor:a}=p(n);return(0,r.jsx)(m.Z,{style:{backgroundColor:o,color:a},children:(0,r.jsx)("div",{ref:n,className:"h-full w-full [&>svg]:h-full [&>svg]:w-full",dangerouslySetInnerHTML:{__html:t}})})}},34077:function(e,t,n){"use strict";n.d(t,{FO:function(){return c},N7:function(){return d},Wy:function(){return u},to:function(){return r},vr:function(){return i}});var r,s=n(64507),o=n(68444),a=n(40350);!function(e){e.ReadyForContent="anthropic.claude.usercontent.sandbox.ReadyForContent",e.SetContent="anthropic.claude.usercontent.sandbox.SetContent",e.GetFile="anthropic.claude.usercontent.sandbox.GetFile",e.SendConversationMessage="anthropic.claude.usercontent.sandbox.SendConversationMessage",e.RunCode="anthropic.claude.usercontent.sandbox.RunCode"}(r||(r={}));let i=o.z.object({status:o.z.enum(["success","error"]),result:o.z.string().optional(),logs:o.z.array(o.z.string()),error:o.z.string().optional()}),l={"anthropic.claude.usercontent.sandbox.SetContent":{requestSchema:a.Zq.extend({method:o.z.literal("anthropic.claude.usercontent.sandbox.SetContent"),payload:o.z.strictObject({"@type":o.z.literal("anthropic.claude.usercontent.sandbox.SandboxContent"),content:o.z.string(),type:o.z.nativeEnum(s.JP)})}),responseSchema:a.AY,alwaysPermitted:!1},"anthropic.claude.usercontent.sandbox.ReadyForContent":{requestSchema:a.Zq.extend({method:o.z.literal("anthropic.claude.usercontent.sandbox.ReadyForContent"),payload:o.z.strictObject({"@type":o.z.literal("google.protobuf.Empty")})}),responseSchema:a.AY,alwaysPermitted:!0},"anthropic.claude.usercontent.sandbox.GetFile":{requestSchema:a.Zq.extend({method:o.z.literal("anthropic.claude.usercontent.sandbox.GetFile"),payload:o.z.strictObject({key:o.z.string(),"@type":o.z.literal("anthropic.claude.usercontent.sandbox.GetFileRequest")})}),responseSchema:a.Tk.extend({payload:o.z.strictObject({value:o.z.instanceof(Uint8Array).nullable(),"@type":o.z.literal("anthropic.claude.usercontent.sandbox.GetFileResponse")})}),alwaysPermitted:!1},"anthropic.claude.usercontent.sandbox.SendConversationMessage":{requestSchema:a.Zq.extend({method:o.z.literal("anthropic.claude.usercontent.sandbox.SendConversationMessage"),payload:o.z.strictObject({message:o.z.string(),messageType:o.z.enum(["text","error"]),"@type":o.z.literal("anthropic.claude.usercontent.sandbox.SendConversationMessageRequest")})}),responseSchema:a.AY,alwaysPermitted:!1},"anthropic.claude.usercontent.sandbox.RunCode":{requestSchema:a.Zq.extend({method:o.z.literal("anthropic.claude.usercontent.sandbox.RunCode"),payload:o.z.strictObject({code:o.z.string(),"@type":o.z.literal("anthropic.claude.usercontent.sandbox.RunCodeRequest")})}),responseSchema:a.Tk.extend({payload:o.z.strictObject({"@type":o.z.literal("anthropic.claude.usercontent.sandbox.RunCodeResponse")}).merge(i)}),alwaysPermitted:!1}};o.z.enum(["anthropic.claude.usercontent.sandbox.ReadyForContent","anthropic.claude.usercontent.sandbox.GetFile","anthropic.claude.usercontent.sandbox.SendConversationMessage"]),o.z.discriminatedUnion("method",[l["anthropic.claude.usercontent.sandbox.ReadyForContent"].requestSchema,l["anthropic.claude.usercontent.sandbox.GetFile"].requestSchema,l["anthropic.claude.usercontent.sandbox.SendConversationMessage"].requestSchema]);let c=o.z.union([a.AY,l["anthropic.claude.usercontent.sandbox.GetFile"].responseSchema,l["anthropic.claude.usercontent.sandbox.SendConversationMessage"].responseSchema]),u=o.z.enum(["anthropic.claude.usercontent.sandbox.SetContent","anthropic.claude.usercontent.sandbox.RunCode"]),d=o.z.discriminatedUnion("method",[l["anthropic.claude.usercontent.sandbox.SetContent"].requestSchema,l["anthropic.claude.usercontent.sandbox.RunCode"].requestSchema]);o.z.union([l["anthropic.claude.usercontent.sandbox.SetContent"].responseSchema,l["anthropic.claude.usercontent.sandbox.RunCode"].responseSchema]),Object.entries(l).filter(e=>{let[t,n]=e;return!0===n.alwaysPermitted}).map(e=>{let[t,n]=e;return t})},40350:function(e,t,n){"use strict";n.d(t,{AY:function(){return l},D7:function(){return c},Kj:function(){return i},Tk:function(){return a},Zq:function(){return o},qV:function(){return s},v8:function(){return u}});var r=n(68444);let s=r.z.object({channel:r.z.enum(["request","response"]),requestId:r.z.string()}).passthrough(),o=s.strict().extend({channel:r.z.literal("request"),method:r.z.string(),payload:r.z.strictObject({"@type":r.z.string()})}),a=s.extend({channel:r.z.literal("response"),status:r.z.number().int().min(100).max(599),payload:r.z.strictObject({"@type":r.z.string()}).passthrough()}).passthrough(),i=a.extend({status:r.z.number().int().min(400).max(599),payload:r.z.strictObject({"@type":r.z.literal("anthropic.claude.usercontent.ErrorResponse"),error:r.z.string()})}),l=a.extend({payload:r.z.strictObject({"@type":r.z.literal("google.protobuf.Empty")})}),c={"@type":"google.protobuf.Empty"},u=e=>({"@type":"anthropic.claude.usercontent.ErrorResponse",error:e})},64507:function(e,t,n){"use strict";var r,s;n.d(t,{JP:function(){return r},KD:function(){return s}}),function(e){e.Text="text/plain",e.Markdown="text/markdown",e.Html="text/html",e.Code="application/vnd.ant.code",e.Svg="image/svg+xml",e.Mermaid="application/vnd.ant.mermaid",e.React="application/vnd.ant.react"}(r||(r={})),function(e){e.Repl="application/vnd.ant.repl"}(s||(s={}));let o="antArtifact",a="<".concat(o,"(?:\\s+([^>]*)>|(?!>)\\S*)"),i="</".concat(o,">");RegExp("".concat(a,"([\\s\\S]*?)(?:").concat(i,"|$)"),"g"),RegExp("".concat(a,"[\\s\\S]*?(?:").concat(i,"|$)"),"g");let l="antThinking",c="<".concat(l,">");RegExp("".concat(c,"[\\s\\S]*?(?:</").concat(l,">|$)"),"g")}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[5458,1065,4310,8437,9034,780,4788,1525,8758,8444,1843,4988,1293,9997,1744],function(){return t(17601)}),_N_E=e.O()}]);